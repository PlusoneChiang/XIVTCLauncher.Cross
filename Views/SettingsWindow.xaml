<Window x:Class="FFXIVSimpleLauncher.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Settings"
        Height="520" Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        FontFamily="{materialDesign:MaterialDesignFont}">

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock Grid.Row="0"
                   Text="Settings"
                   Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                   Margin="0,0,0,16"/>

        <!-- Game Path -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBox Grid.Column="0"
                     x:Name="GamePathTextBox"
                     materialDesign:HintAssist.Hint="Game Path"
                     Style="{StaticResource MaterialDesignOutlinedTextBox}"
                     Margin="0,0,8,0"/>

            <Button Grid.Column="1"
                    Content="Browse"
                    Click="BrowseButton_Click"
                    Style="{StaticResource MaterialDesignOutlinedButton}"/>
        </Grid>

        <!-- Dalamud Section -->
        <TextBlock Grid.Row="2"
                   Text="Dalamud (Plugins)"
                   Style="{StaticResource MaterialDesignSubtitle1TextBlock}"
                   Margin="0,24,0,8"/>

        <StackPanel Grid.Row="3" Orientation="Vertical">
            <CheckBox x:Name="EnableDalamudCheckBox"
                      Content="Enable Dalamud"
                      Style="{StaticResource MaterialDesignCheckBox}"
                      Margin="0,0,0,8"/>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="Injection Delay (ms):"
                           VerticalAlignment="Center"
                           Margin="0,0,8,0"/>

                <TextBox Grid.Column="1"
                         x:Name="InjectionDelayTextBox"
                         Text="0"
                         materialDesign:HintAssist.Hint="Delay"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         PreviewTextInput="InjectionDelayTextBox_PreviewTextInput"/>
            </Grid>

            <!-- Local Dalamud Path (required for Taiwan version) -->
            <TextBlock Text="Local Dalamud Path"
                       Style="{StaticResource MaterialDesignBody2TextBlock}"
                       Margin="0,16,0,4"/>

            <Grid IsEnabled="{Binding IsChecked, ElementName=EnableDalamudCheckBox}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBox Grid.Column="0"
                         x:Name="LocalDalamudPathTextBox"
                         materialDesign:HintAssist.Hint="Dalamud Build Path"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         IsReadOnly="True"
                         Margin="0,0,8,0"/>

                <Button Grid.Column="1"
                        Content="Browse"
                        Click="BrowseLocalDalamud_Click"
                        Style="{StaticResource MaterialDesignOutlinedButton}"/>
            </Grid>

            <TextBlock Text="Path to folder containing Dalamud.Injector.exe (台版需要自行編譯的 Dalamud)"
                       FontSize="11"
                       Foreground="Gray"
                       Margin="0,4,0,0"/>
        </StackPanel>

        <!-- Buttons -->
        <StackPanel Grid.Row="5" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Save"
                    Click="SaveButton_Click"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    Width="80"
                    Margin="0,0,8,0"/>

            <Button Content="Cancel"
                    Click="CancelButton_Click"
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Width="80"/>
        </StackPanel>
    </Grid>
</Window>
